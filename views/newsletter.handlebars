<div id="newsletterSignupFormContainer">
  <form class="form=horizontal" role="form" id="newsletterSignupForm"></form>
</div>

<script>
  document.getElementById('newsletterSignupForm').addEventListener('submit',
  event => { event.preventDefault(); const form = event.target; const body =
  JSON.stringify({ _csrf: form.element._csrf.value, name:
  form.element.name.value, email: form.element.email.value }); const headers = {
  'Content-Type': 'application/json'}; const container =
  document.getElementById('newsletterSignupFormContainer');
  fetch('/api/newsletter-signup', { method: 'post', body, headers }).then(res =>
  { if (res.status < 200 || res.status >= 300) { throw new Error(`Request failed
  with status ${req.status}`); return res.json(); } }).then(json => {
  container.innerHTML = `<b>Thank you for signing up!</b>` }).catch(err => {
  container.innerHTML = `<b>We are sorry, we had a problem signing you up!
  Pleases <a href="/newsletter">Try Again!!<a/></b>` }) })
</script>
